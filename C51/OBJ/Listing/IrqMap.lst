C51 COMPILER V9.57.0.0   IRQMAP                                                            12/14/2025 23:42:35 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE IRQMAP
OBJECT MODULE PLACED IN ..\OBJ\IrqMap.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\HANDWARE\SYSTEM\IrqMap.c LARGE OMF2 OPTIMIZE(3,SIZE) BROWSE INCDIR(..
                    -\USER;..\FUNC_HANDLER;..\GUI_APP;..\HANDWARE\ADC;..\HANDWARE\GPIO;..\HANDWARE\PWM;..\HANDWARE\TIMER;..\HANDWARE\UART;..\
                    -HANDWARE\SYSTEM;..\HANDWARE\WDT;..\HANDWARE\APP) DEBUG PRINT(..\OBJ\Listing\IrqMap.lst) TABS(2) OBJECT(..\OBJ\IrqMap.obj
                    -)

line level    source

   1          /*
   2          @verbatim
   3          --------------------------------------------------------------------------------
   4          MIT License
   5          
   6          Copyright (c) [2025] [Vladimir Radchenko]
   7          Version 1.0
   8          
   9          For communication or thanks, you can contact me by mail DwinRVB@mail.ru
  10          
  11          Permission is hereby granted, free of charge, to any person obtaining a copy
  12          of this software and associated documentation files (the "Software"), to deal
  13          in the Software without restriction, including without limitation the rights
  14          to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  15          copies of the Software, and to permit persons to whom the Software is
  16          furnished to do so, subject to the following conditions:
  17          
  18          The above copyright notice and this permission notice shall be included in all
  19          copies or substantial portions of the Software.
  20          
  21          THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  22          IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  23          FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  24          AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  25          LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  26          OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  27          SOFTWARE.
  28          --------------------------------------------------------------------------------
  29          @endverbatim
  30          */
  31          
  32          //==============================================================================
  33          //---------------------------------Includes-------------------------------------
  34          //==============================================================================
  35          #include "IrqMap.h" 
  36          #include "UART.h"   
  37          #include "TIMER.h"  
  38          
  39          //==============================================================================
  40          //---------------------------------Defines--------------------------------------
  41          //==============================================================================
  42          
  43          //==============================================================================
  44          //---------------------------------VARIABLES------------------------------------
  45          //==============================================================================
  46          /**
  47           * @var uint32_t DelayMsTick
  48           * @brief Global tick counter for millisecond delays.
  49           */
  50          uint32_t DelayMsTick = 0;
  51          
  52          /**
C51 COMPILER V9.57.0.0   IRQMAP                                                            12/14/2025 23:42:35 PAGE 2   

  53           * @var uint32_t Uptime
  54           * @brief System uptime counter in seconds.
  55           */
  56          extern uint32_t Uptime;
  57          
  58          /**
  59           * @var uint32_t CntMs
  60           * @brief Millisecond counter for uptime tracking.
  61           */
  62          uint32_t CntMs;
  63          
  64          /**
  65           * @var uint32_t SysTimCnt
  66           * @brief System timer counter.
  67           */
  68          extern uint32_t SysTimCnt;
  69          
  70          /**
  71           * @var uint32_t Tim0Cnt
  72           * @brief Timer0 interrupt counter.
  73           */
  74          uint32_t Tim0Cnt;
  75          
  76          /**
  77           * @var uint32_t Tim1Cnt
  78           * @brief Timer1 interrupt counter.
  79           */
  80          uint32_t Tim1Cnt;
  81          
  82          //==============================================================================
  83          //--------------------------------FUNCTIONS-------------------------------------
  84          //==============================================================================
  85          /**
  86           * @brief Interrupt service routine for external interrupt 0.
  87           */
  88          void ExternaPin0Irq(void) interrupt 0
  89          {
  90   1          EA = 0; // Disable global interrupts
  91   1          EA = 1; // Re-enable global interrupts
  92   1      }
  93          
  94          /**
  95           * @brief Interrupt service routine for Timer0.
  96           * Reloads Timer0 and decrements DelayMsTick.
  97           */
  98          void Timer0Isr(void) interrupt 1
  99          {
 100   1          TH0 = (uint8_t)(T0_PERIOD_1MS >> 8); // Reload high byte
 101   1          TL0 = (uint8_t)T0_PERIOD_1MS;       // Reload low byte
 102   1          Tim0Cnt++;                 // Increment Timer0 counter
 103   1          if (DelayMsTick) DelayMsTick--; // Decrement delay counter
 104   1      }
 105          
 106          /**
 107           * @brief Interrupt service routine for external interrupt 1.
 108           */
 109          void ExternaPin1Irq(void) interrupt 2
 110          {
 111   1          EA = 0; // Disable global interrupts
 112   1          EA = 1; // Re-enable global interrupts
 113   1      }
 114          
C51 COMPILER V9.57.0.0   IRQMAP                                                            12/14/2025 23:42:35 PAGE 3   

 115          /**
 116           * @brief Interrupt service routine for Timer1.
 117           * Reloads Timer1 and decrements DelayMsTick.
 118           */
 119          void Timer1Isr(void) interrupt 3
 120          {
 121   1          TH1 = (uint8_t)(T1_PERIOD_1MS >> 8); // Reload high byte
 122   1          TL1 = (uint8_t)T1_PERIOD_1MS;       // Reload low byte
 123   1          Tim1Cnt++;                 // Increment Timer1 counter
 124   1          if (DelayMsTick) DelayMsTick--; // Decrement delay counter
 125   1      }
 126          
 127          /**
 128           * @brief Interrupt service routine for Timer2.
 129           * Updates uptime, decrements DelayMsTick, and calls InterfaceDelay.
 130           */
 131          void Timer2Isr(void) interrupt 5
 132          {
 133   1        SysTimCnt++;
 134   1          TF2 = 0; // Clear Timer2 overflow flag
 135   1          CntMs++; // Increment millisecond counter
 136   1          if (DelayMsTick) DelayMsTick--; // Decrement delay counter
 137   1          if (CntMs >= 999)
 138   1          {
 139   2              CntMs = 0;
 140   2              Uptime++; // Increment uptime in seconds
 141   2          }
 142   1          InterfaceDelay(); // Handle UART interface delay
 143   1      }
 144          
 145          /**
 146           * @brief Interrupt service routine for CAN.
 147           */
 148          void CanIrq(void) interrupt 9
 149          {
 150   1          ; // Placeholder for CAN interrupt handling
 151   1      }
 152          
 153          
 154          
 155          //==============================================================================
 156          //---------------------------------END FILE-------------------------------------
 157          //==============================================================================


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    443    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     16    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
